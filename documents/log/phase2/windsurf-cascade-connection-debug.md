# harca-localのCascade接続問題「no tools returned」の原因分析と解決策

## 考えられる原因と解決策

### 1. ツール登録の問題
**原因**: HARCAサーバーがMCPプロトコルに準拠したツール情報を正しく登録・返却していない可能性があります。
**解決策**: 
- `core/tools/index.js`でツールが正しく登録されているか確認
- `integrations/windsurf/stdio-proxy.js`がツール情報を正しく中継しているか確認

### 2. サーバー起動状態の問題
**原因**: HARCAサーバーが起動していないか、適切に初期化されていない可能性があります。
**解決策**:
- HARCAサーバーを起動して動作確認
- サーバーログで初期化エラーがないか確認

### 3. STDIOプロキシの問題
**原因**: stdio-proxy.jsが期待されるMCPプロトコルの形式でデータを中継できていない可能性があります。
**解決策**:
- プロキシのログ出力を有効化して通信内容を確認
- `stdio-proxy.js`のコードを確認・修正

### 4. Windsurfとの互換性問題
**原因**: HARCAとWindsurfのMCPプロトコルバージョンが一致していない可能性があります。
**解決策**:
- MCPプロトコルのバージョンを確認
- Windsurfの最新アップデートを確認

### 5. 環境変数設定の問題
**原因**: mcp_config.jsonの環境変数設定が不適切な可能性があります。
**解決策**:
- `HARCA_API_URL`が正しいURLを指しているか確認
- 必要に応じて追加の環境変数を設定

## デバッグ手順

1. HARCAサーバーが正常に起動していることを確認
2. ログ出力を有効にしてエラーメッセージを確認
3. stdio-proxy.jsの通信内容をデバッグ
4. Windsurfとの通信プロトコルを確認
5. 必要に応じてコードを修正